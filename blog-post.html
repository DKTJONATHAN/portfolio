<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow">
    <meta name="title" content="Blog Posts | Mwaniki Reports">
    <meta name="description" content="Latest articles from Mwaniki Reports">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.jonathanmwaniki.co.ke/blog.html">
    <meta property="og:title" content="Blog Posts | Mwaniki Reports">
    <meta property="og:description" content="Latest articles from Mwaniki Reports">
    <meta property="og:image" content="/images/Jonathan-Mwaniki-logo.png">
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://www.jonathanmwaniki.co.ke/blog.html">
    <meta property="twitter:title" content="Blog Posts | Mwaniki Reports">
    <meta property="twitter:description" content="Latest articles from Mwaniki Reports">
    <meta property="twitter:image" content="/images/Jonathan-Mwaniki-logo.png">
    <title>Blog Posts | Mwaniki Reports</title>
    <link rel="canonical" href="https://www.jonathanmwaniki.co.ke/blog.html">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        /* [Previous CSS styles remain exactly the same] */
        /* Add these new styles for the post listing */
        
        .posts-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }
        
        .post-card {
            background: var(--background-color);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            border: 1px solid var(--border-color);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .post-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 25px rgba(0, 0, 0, 0.15);
        }
        
        .post-card-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }
        
        .post-card-content {
            padding: 20px;
        }
        
        .post-card-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 10px;
            line-height: 1.4;
        }
        
        .post-card-excerpt {
            color: var(--light-text);
            margin-bottom: 15px;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .post-card-meta {
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-size: 0.85rem;
            color: var(--light-text);
        }
        
        .post-card-date {
            display: flex;
            align-items: center;
        }
        
        .post-card-category {
            background: var(--primary-color);
            color: white;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            text-transform: uppercase;
        }
        
        @media (max-width: 768px) {
            .posts-list {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div id="mainContent">
        <nav class="mobile-nav">
            <div class="mobile-nav-container">
                <a href="/index.html" class="mobile-nav-link" aria-label="Home"><i class="fas fa-home"></i><span>Home</span></a>
                <a href="/index.html#services" class="mobile-nav-link" aria-label="Services"><i class="fas fa-cogs"></i><span>Services</span></a>
                <a href="/index.html#portfolio" class="mobile-nav-link" aria-label="Portfolio"><i class="fas fa-briefcase"></i><span>Portfolio</span></a>
                <a href="/blog.html" class="mobile-nav-link active" aria-label="Blog"><i class="fas fa-blog"></i><span>Blog</span></a>
                <a href="/index.html#contact" class="mobile-nav-link" aria-label="Contact"><i class="fas fa-envelope"></i><span>Contact</span></a>
            </div>
        </nav>
        <nav class="desktop-nav">
            <div class="nav-container">
                <div class="nav-brand">
                    <div class="brand-logo">
                        <img src="/images/Jonathan-Mwaniki-logo.png" alt="Mwaniki Reports Logo" loading="eager">
                    </div>
                    <span class="brand-name">Mwaniki Reports</span>
                </div>
                <div class="nav-links">
                    <a href="/index.html" class="nav-link">Home</a>
                    <a href="/index.html#services" class="nav-link">Services</a>
                    <a href="/index.html#portfolio" class="nav-link">Portfolio</a>
                    <a href="/blog.html" class="nav-link active">Blog</a>
                    <a href="/index.html#about" class="nav-link">About</a>
                    <a href="/index.html#contact" class="nav-link">Contact</a>
                </div>
            </div>
        </nav>
        <main class="blog-container">
            <div class="section-header">
                <h2 class="section-title">Latest Articles</h2>
            </div>
            
            <div id="posts-list" class="posts-list">
                <!-- Posts will be dynamically inserted here by JavaScript -->
                <div class="loading-spinner" style="grid-column: 1/-1; text-align: center; padding: 40px;">
                    <div style="display: inline-block; width: 50px; height: 50px; border: 5px solid rgba(30, 64, 175, 0.3); border-radius: 50%; border-top-color: #1e40af; animation: spin 1s ease-in-out infinite;"></div>
                    <p style="margin-top: 15px; color: var(--light-text);">Loading articles...</p>
                </div>
            </div>
        </main>
        <footer class="site-footer">
            <div class="footer-container">
                <div class="footer-brand">
                    <div class="footer-logo">
                        <img src="/images/Jonathan-Mwaniki-logo.png" alt="Mwaniki Reports Logo" loading="lazy">
                    </div>
                    <div class="footer-info">
                        <span class="footer-name">Mwaniki Reports</span>
                        <p class="footer-description">Your trusted source for news, sports, tech, and entertainment.</p>
                    </div>
                </div>
                <div class="footer-legal">
                    <p class="copyright">Â© 2025 Mwaniki Reports. All Rights Reserved.</p>
                    <div class="legal-links">
                        <a href="/privacy-policy" class="legal-link">Privacy Policy</a>
                        <a href="/terms-of-service" class="legal-link">Terms of Service</a>
                        <a href="/sitemap.xml" class="legal-link">Sitemap</a>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <script>
        // Function to fetch and display all posts
        async function loadPosts() {
            try {
                const response = await fetch('/.netlify/functions/list-posts');
                if (!response.ok) {
                    throw new Error('Failed to load posts');
                }
                
                const posts = await response.json();
                displayPosts(posts);
            } catch (error) {
                document.getElementById('posts-list').innerHTML = `
                    <div class="error-message" style="grid-column: 1/-1; text-align: center; padding: 40px;">
                        <i class="fas fa-exclamation-triangle" style="font-size: 2rem; color: #ef4444; margin-bottom: 15px;"></i>
                        <p style="color: var(--light-text);">${error.message}. Please try again later.</p>
                        <button onclick="loadPosts()" style="margin-top: 15px; padding: 8px 16px; background: var(--primary-color); color: white; border: none; border-radius: 6px; cursor: pointer;">Retry</button>
                    </div>
                `;
            }
        }

        // Function to display posts in the grid
        function displayPosts(posts) {
            const postsList = document.getElementById('posts-list');
            
            if (posts.length === 0) {
                postsList.innerHTML = `
                    <div style="grid-column: 1/-1; text-align: center; padding: 40px;">
                        <p style="color: var(--light-text);">No articles found. Check back later!</p>
                    </div>
                `;
                return;
            }
            
            // Sort posts by date (newest first)
            posts.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            // Generate HTML for each post
            postsList.innerHTML = posts.map(post => `
                <article class="post-card" itemscope itemtype="https://schema.org/BlogPosting">
                    <a href="/content/articles/${post.slug}.html" style="text-decoration: none; color: inherit;">
                        <img src="${post.image || '/images/Jonathan-Mwaniki-logo.png'}" alt="${post.title}" class="post-card-image" loading="lazy" onerror="this.src='/images/Jonathan-Mwaniki-logo.png'">
                        <div class="post-card-content">
                            <h3 class="post-card-title" itemprop="headline">${post.title}</h3>
                            <p class="post-card-excerpt" itemprop="description">${post.description || ''}</p>
                            <div class="post-card-meta">
                                <div class="post-card-date">
                                    <time datetime="${post.date}" itemprop="datePublished">${formatDate(post.date)}</time>
                                </div>
                                <span class="post-card-category" itemprop="articleSection">${post.category || 'General'}</span>
                            </div>
                        </div>
                    </a>
                    <meta itemprop="author" content="Jonathan Mwaniki">
                    <meta itemprop="publisher" content="Mwaniki Reports">
                </article>
            `).join('');
        }

        // Helper function to format dates
        function formatDate(dateString) {
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            return new Date(dateString).toLocaleDateString('en-US', options);
        }

        // Load posts when page loads
        document.addEventListener('DOMContentLoaded', loadPosts);

        // Add animation for the spinner
        const style = document.createElement('style');
        style.textContent = `
            @keyframes spin {
                to { transform: rotate(360deg); }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>